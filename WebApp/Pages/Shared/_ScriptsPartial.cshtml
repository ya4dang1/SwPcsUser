<script>
  $(document).ready(function () {
    // For btn-group
    $('.btn-group').each(function () {
      var _parent = this;
      $('.btn.currencymenu', this).click(function () {
        $(this).addClass('active');
        $(this).siblings().removeClass('active');
      });
    });

    $('.select2-single').select2({
      width: '100%',
      placeholder: "Select",
      theme: 'bootstrap'
    });
    // Initilize multiple select
    $('.select2-multiple').select2({
      width: '100%',
      minimumResultsForSearch: Infinity,
      theme: 'bootstrap'
    });

    // For confirm delete
    $('[class*="confirm-delete"]:not(.disabled)').click(function (e) {
      return confirm('Proceed to delete?');
    });
    // For confirm submit
    $('[class*="confirm-submit"]:not(.disabled)').click(function (e) {
      return confirm('Proceed to submit?');
    });
    // For confirm submit
    $('.disabled').click(function (e) {
      return false;
    });

    // For Expiry Date
    $('.date-format-expiry').mask('99/9999');
    // For Card Number
    $('.card-number-format').mask('9999 9999 9999 9999');

    // For toastr
    if(GetURLParameter('toast') == 'success'){
      toastr.success('Your submission has been saved.', 'Success');
    }
    if(GetURLParameter('toast') == 'error'){
      toastr.error('Something went wrong.', 'Oops');
    }

    // For general datatable status
    $('.datatable-status').each(function(){
      $(this).html(getIcon($.trim($(this).html())));
    });
    
    // TODO
    //$('.datetimepicker').datetimepicker();
  });

  $(window).on('load', function(){
    $('table.table').css('width', '100%');
  });

  function getIcon(text, texttype = 'light') {
    var html = '';
    switch (text) {
      case true:
        html = '<i class="fa fa-check text-success"></i>';
        break;
      case false:
        html = '<i class="fas fa-times text-danger"></i>';
        break;
      case 'New':
        html = '<h5><span class="badge badge-warning">New</span></h5>';
        break;
      case 'Activated':
      case 'Registered':
        html = '<h5><span class="badge badge-success">Registered</span></h5>';
        break;
      case 'Deactivated':
      case 'Unregistered':
        html = '<h5><span class="badge badge-danger">Unregistered</span></h5>';
        break;
      case 'Pending':
        html = '<h5><span class="badge badge-primary">Pending</span></h5>';
        break;
      case 'PendingApproval':
        html = '<h5><span class="badge badge-primary text-nowrap">Pending Approval</span></h5>';
        break;
      case 'PendingAction':
        html = '<h5><span class="badge badge-primary text-nowrap">Pending Action</span></h5>';
        break;
      case 'Processing':
        html = '<h5><span class="badge badge-primary">Processing</span></h5>';
        break;
      case 'Submitted':
        html = '<h5><span class="badge badge-primary">Submitted</span></h5>';
        break;
      case 'CompletedWithError':
        html = '<h5><span class="badge badge-warning text-nowrap">Completed With Error</span></h5>';
        break;
      case 'Completed':
        html = '<h5><span class="badge badge-success">Completed</span></h5>';
        break;
      case 'Failed':
        html = '<h5><span class="badge badge-danger">Failed</span></h5>';
        break;
      default:
        html = '<h5><span class="badge badge-' + texttype + '">' + text + '</span></h5>';
        break;
    }
    return html;
  }
</script>
